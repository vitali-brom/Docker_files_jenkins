(this["webpackJsonpreact-starter-ts"]=this["webpackJsonpreact-starter-ts"]||[]).push([[0],{119:function(e,t,n){},247:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),i=n(43),s=n.n(i),a=n(14),j=n(15),o=n(32),u=n(61),l=n(34),b=n(96),d=n(97);u.a.use(d.a).use(b.a).use(l.e).init({react:{useSuspense:!1},lng:"en",fallbackLng:"en",debug:!1,keySeparator:".",ns:["common","login"],defaultNS:"common",interpolation:{escapeValue:!1},detection:{caches:["localStorage"]}});u.a;var O,h,x=n(30),f=n(16),p=Object(x.b)({name:"auth",initialState:{isAuthenticated:!0},reducers:{authenticate:function(e){e.isAuthenticated=!0}}}),m=Object(f.b)({auth:p.reducer}),g=Object(x.a)({reducer:m,devTools:!0}),v=(n(119),n(2)),y=n(249),S=function(e){return e.auth.isAuthenticated},k=n(1),w=function(){var e=Object(y.a)().i18n,t=function(t){return e.changeLanguage(t)};return Object(k.jsxs)("div",{children:[Object(k.jsx)("button",{onClick:function(){return t("ru")},children:"RU"}),Object(k.jsx)("button",{onClick:function(){return t("en")},children:"EN"})]})},L=n(57),z=o.b.header(O||(O=Object(L.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 10px;\n  background-color: ",";\n"])),(function(e){return e.theme.primary})),C=o.b.div(h||(h=Object(L.a)(["\n  color: white;\n"]))),F=function(){var e=Object(v.h)(),t=Object(y.a)("common").t,n=Object(j.c)(S);return Object(k.jsxs)(z,{children:[Object(k.jsx)(C,{children:t("title")}),Object(k.jsx)(w,{}),n?null:Object(k.jsx)(a.b,{to:"/auth/login",children:"Log in"}),n?Object(k.jsx)("button",{onClick:function(){e("auth/login")},children:"Log out"}):null]})},N=n(4),A=n.n(N),I=n(13),P=n(5),R=n(250),q="".concat("starter-ts","-token"),B=n(56),T=n.n(B).a.create({baseURL:"http://localhost:9229"});T.interceptors.request.use((function(e){var t=localStorage.getItem(q);return t&&(null===e||void 0===e?void 0:e.headers)&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var D=n(104);new(n.n(D).a)(T,{delayResponse:3e3}).onPost("/login").reply((function(e){return e.data.includes("pass123")?[401,"Wrong credentials"]:[200,{user:{email:"test@test.com",firstName:"first",lastName:"last"},token:"xxxxx.yyyyy.zzzzz"}]}));var E=function(e){return T.post("/login",e)},J=n(58),U=n(22),M=n(108),V=n(46),W=V.a({email:V.b().required(),password:V.b().required()}),G=function(e){var t,n,c=e.onSubmit,r=Object(y.a)(["login"]).t,i=Object(U.d)({resolver:Object(M.a)(W)}),s=i.handleSubmit,a=i.register,j=i.formState.errors;return Object(k.jsxs)("form",{onSubmit:s(c),children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("label",{children:r("login:email")}),Object(k.jsx)("input",Object(J.a)({},a("email"))),Object(k.jsx)("p",{children:null===(t=j.email)||void 0===t?void 0:t.message})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("label",{children:r("login:password")}),Object(k.jsx)("input",Object(J.a)({},a("password"))),Object(k.jsx)("p",{children:null===(n=j.password)||void 0===n?void 0:n.message})]}),Object(k.jsx)("input",{type:"submit"})]})},H=function(){var e=Object(v.h)(),t=Object(j.b)(),n=Object(R.a)(function(){var n=Object(I.a)(A.a.mark((function n(c){var r,i;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E(c);case 3:r=n.sent,i=r.data,s=i.token,localStorage.setItem(q,s),t(p.actions.authenticate()),e("/"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.error(n.t0);case 13:case"end":return n.stop()}var s}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}(),[]),c=Object(P.a)(n,2)[1];return Object(k.jsx)("div",{children:Object(k.jsx)(G,{onSubmit:c})})},K=function(){return Object(k.jsx)("div",{children:"Registration"})},Q=function(){return Object(k.jsxs)(v.e,{children:[Object(k.jsx)(v.c,{index:!0,element:Object(k.jsx)(v.a,{to:"login"})}),Object(k.jsx)(v.c,{path:"login",element:Object(k.jsx)(H,{})}),Object(k.jsx)(v.c,{path:"registration",element:Object(k.jsx)(K,{})})]})},X=function(){return Object(k.jsx)("div",{children:"List"})},Y=function(){var e=Object(v.i)().id;return Object(k.jsxs)("div",{children:["Details for user id: ","".concat(e)]})},Z=function(){return Object(k.jsxs)(v.e,{children:[Object(k.jsx)(v.c,{path:"",element:Object(k.jsx)(X,{})}),Object(k.jsx)(v.c,{path:":id",element:Object(k.jsx)(Y,{})})]})},$=function(){return Object(k.jsx)("div",{children:"404 Not Found"})},_=function(e){var t=e.children,n=Object(j.c)(S),c=Object(v.g)();return n?t:Object(k.jsx)(v.a,{to:"/auth/login",state:{from:c}})},ee=function(){return Object(k.jsxs)(v.e,{children:[Object(k.jsxs)(v.c,{path:"/",element:Object(k.jsxs)("div",{children:[Object(k.jsx)(F,{}),Object(k.jsx)(v.b,{})]}),children:[Object(k.jsx)(v.c,{path:"users/*",element:Object(k.jsx)(_,{children:Object(k.jsx)(Z,{})})}),Object(k.jsx)(v.c,{path:"*",element:Object(k.jsx)($,{})})]}),Object(k.jsx)(v.c,{path:"auth/*",element:Object(k.jsx)(Q,{})})]})},te=function(){return Object(k.jsx)("div",{children:Object(k.jsx)(ee,{})})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,251)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),i(e),s(e)}))};s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(j.a,{store:g,children:Object(k.jsx)(o.a,{theme:{primary:"#005faf"},children:Object(k.jsx)(a.a,{children:Object(k.jsx)(te,{})})})})}),document.getElementById("root")),ne()}},[[247,1,2]]]);
//# sourceMappingURL=main.99939fd5.chunk.js.map